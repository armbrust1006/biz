<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="global.scit.bizcard.dao.CardImageDAO">

<insert parameterType="CardImage" id="saveCardImage"> insert into CardImage ( m_id, cardnum, cardType, imagePath ) values ( #{m_id}, cardnum_seq.nextval, #{cardType}, #{imagePath} ) </insert>

<insert parameterType="CardImage" id="setMyCardList"> insert into MyCardIndex (m_id, cardNum) values ( #{m_id}, #{cardNum} ) </insert>

<select parameterType="String" id="getImageNumber" resultType="Integer"> select cardnum from( select cardNum from CardImage where m_id=#{m_id} order by inputdate desc ) where rownum = 1 </select>

<select parameterType="String" id="loadCardImage" resultType="String"> select imagePath from CardImage where cardNum=#{cardNum} </select>

<select parameterType="String" id="checkExistMine" resultType="String"> select CARDTYPE from CARDIMAGE where m_id=#{m_id} and CARDTYPE='my' </select>

<update parameterType="CardImage" id="sharedChange"> update CardImage set shared=#{shared} where cardNum=#{cardNum} </update>

</mapper>